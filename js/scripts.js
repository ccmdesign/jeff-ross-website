$(document).ready(function(){var e=parseInt(moment.utc().startOf("day").format("x"));firebase.initializeApp({apiKey:"AIzaSyDhPvuuQNHkVrgm7_OAAiQ6OVlCr05li68",authDomain:"jeff-ross-prd.firebaseapp.com",databaseURL:"https://jeff-ross-prd.firebaseio.com",projectId:"jeff-ross-prd",storageBucket:"jeff-ross-prd.appspot.com",messagingSenderId:"672260888927"}),1<$(".bg-carousel").length&&setInterval(function(){var e=$(".bg-carousel.m-visible"),a=e.is(".bg-carousel:last")?$(".bg-carousel").eq(0):e.next();e.removeClass("m-visible"),a.addClass("m-visible")},6500),$(".header .fa-bars").click(function(){$("#overlay").addClass("m-active"),$(".header nav ul").addClass("active")}),$("#overlay").click(function(){$(this).removeClass("m-active"),$(".header nav ul").removeClass("active")}),$(".b-upcoming-show").length&&firebase.database().ref("/tour-dates").orderByChild("date").startAt(e).limitToFirst(1).once("value",function(e){e.forEach(function(e){var a=e.val(),t="",d=$(".b-upcoming-show a");a.link&&(-1<a.link.indexOf("//")?d.attr("href",a.link):d.attr("href","//"+a.link)),t+="next show: ",t+=moment.utc(parseInt(a.date)).format("MMM Do")+" ",t+=a.time+" | ",t+=a.venue+" - ",t+=a.location,d.html(t)})}),$(".press").length&&firebase.database().ref("/press").orderByChild("date").limitToLast(50).once("value",function(e){e.forEach(function(e){var a=e.val(),t=$("<li/>").addClass("press-item"),d=$("<div/>").addClass("press-media m-text"),s=$("<div/>").addClass("press-content"),i=$("<div/>").addClass("press-meta"),n=$("<a/>").attr("target","_blank");a.link&&(-1<a.link.indexOf("//")?n.attr("href",a.link):n.attr("href","//"+a.link)),i.append($("<span/>").addClass("press-publisher").text(a.publisher)),i.append($("<span/>").addClass("press-date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),s.append($("<div>").addClass("press-title").text(a.title)),s.append(i),"article"==a.type?d.append($("<i/>").addClass("fa fa-file-text-o")):"video"==a.type?d.append($("<i/>").addClass("fa fa-video-camera")):"audio"==a.type&&d.append($("<i/>").addClass("fa fa-volume-up")),$(".press").prepend(t.append(n.append(d).append(s)))})}),$(".tour-dates").length&&firebase.database().ref("/tour-dates").orderByChild("date").startAt(e).limitToFirst(50).once("value",function(e){e.forEach(function(e){var a=e.val(),t=$("<tr/>"),d=$("<a/>").attr("target","_blank");a.link&&(-1<a.link.indexOf("//")?d.attr("href",a.link):d.attr("href","//"+a.link)),d.append("BUY"),t.append($("<td/>").addClass("date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),t.append($("<td/>").addClass("time").text(a.time)),t.append($("<td/>").addClass("tour").text(a.tour)),t.append($("<td/>").addClass("venue").text(a.venue)),t.append($("<td/>").addClass("location").text(a.location)),t.append($("<td/>").addClass("link").append(d)),$(".tour-dates tbody").append(t)})}),$(".videos").length&&$.get("https://www.googleapis.com/youtube/v3/playlistItems",{key:"AIzaSyBnpHRDUZhCruzPnmNrN6U_KikY_28-61Q",part:"snippet",playlistId:"UUvCmIDV0kb0CXez4xjNdE_w"},function(e){$.each(e.items,function(e,a){var t='<li class="b-video-wrapper"><iframe src="//www.youtube.com/embed/';t+=a.snippet.resourceId.videoId,t+='"></iframe></li>',$(".videos").append(t)})}),$("#admin").length&&(firebase.auth().currentUser?($("#admin .b-login").addClass("m-display-none"),$("#admin .b-main").removeClass("m-display-none"),$("#admin .b-header").removeClass("m-display-none")):firebase.auth().onAuthStateChanged(function(e){e&&($("#admin .b-login").addClass("m-display-none"),$("#admin .b-main").removeClass("m-display-none"),$("#admin .b-header").removeClass("m-display-none"))}),$(".datepicker").each(function(){new Pikaday({field:this,format:"MM/DD/YYYY"})}),$("#admin .b-login").submit(function(){var e=$(".b-login .email").val(),a=$(".b-login .password").val();return firebase.auth().signInWithEmailAndPassword(e,a).then(function(e){$("#admin .b-login").addClass("m-display-none"),$("#admin .b-main").removeClass("m-display-none"),$("#admin .b-header").removeClass("m-display-none")}).catch(function(e){console.error(e),$(".b-login .email").css("border-color","red"),$(".b-login .password").css("border-color","red")}),!1})),$("#admin .e-tab:not(.e-logout)").click(function(){var e=$($(this).attr("href"));return $(this).siblings().removeClass("m-selected"),$(this).addClass("m-selected"),e.siblings().addClass("m-display-none"),e.removeClass("m-display-none"),!1}),$("#admin .e-tab.e-logout").click(function(){firebase.auth().signOut().then(function(){window.location.reload()}).catch(function(e){console.error(e)})}),$("#admin .modal .close, #admin .e-overlay").click(function(){$(".modal").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none")}),$("#admin-press").length&&firebase.database().ref("/press").orderByChild("date").on("child_added",function(e){var a=e.val(),t=$("<tr/>");t.append($("<td>").addClass("m-ellipsis date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),t.append($("<td>").addClass("m-ellipsis type m-capitalize").text(a.type)),t.append($("<td>").addClass("m-ellipsis title").text(a.title)),t.append($("<td>").addClass("m-ellipsis publisher").text(a.publisher)),t.append($("<td>").addClass("m-ellipsis link").text(a.link)),t.append($("<td>").html($("<i/>").addClass("fa fa-pencil").data("oid",e.key))),t.children(":last-child").append($("<i/>").addClass("fa fa-times").data("oid",e.key)),$("#admin-press tbody").prepend(t)}),$("#admin .add-button.add-press").click(function(){$(".modal-add-press").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin-press").on("click",".fa.fa-times",function(){firebase.database().ref("/press/"+$(this).data("oid")).set(null),$(this).parents("tr").remove()}),$("#admin-press").on("click",".fa.fa-pencil",function(){var e=$(this).parents("tr").children(),a=$(".modal-edit-press");a.find(".date").val(e.eq(0).text()),a.find(".type").val(e.eq(1).text()),a.find(".title").val(e.eq(2).text()),a.find(".publisher").val(e.eq(3).text()),a.find(".link").val(e.eq(4).text()),$(".modal-edit-press").data("tr",$(this).parents("tr")),$(".modal-edit-press").data("oid",$(this).data("oid")),$(".modal-edit-press").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin .modal-add-press").submit(function(){var a={};return $(this).find(":input").each(function(){var e=$(this).val();"date"==$(this).attr("name")&&(e=[(e=e.split("/"))[2],e[0],e[1]].join("-"),e=parseInt(moment.utc(e).format("x"))),a[$(this).attr("name")]=e}),firebase.database().ref("/press").push(a),$(".modal-add-press").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-add-press input").val(""),!1}),$("#admin .modal-edit-press").submit(function(){$(".modal-edit-press");var e=$(this).data("tr"),a=$(".modal-edit-press .date").val(),t={};return a=[(a=a.split("/"))[2],a[0],a[1]].join("-"),a=parseInt(moment.utc(a).format("x")),t.date=a,t.type=$(".modal-edit-press .type").val(),t.title=$(".modal-edit-press .title").val(),t.publisher=$(".modal-edit-press .publisher").val(),t.link=$(".modal-edit-press .link").val(),firebase.database().ref("/press/"+$(this).data("oid")).set(t),e.children().eq(0).text($(".modal-edit-press .date").val()),e.children().eq(1).text(t.type),e.children().eq(2).text(t.title),e.children().eq(3).text(t.publisher),e.children().eq(4).text(t.link),$(".modal-edit-press").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-edit-press input").val(""),!1}),$("#admin-tour").length&&firebase.database().ref("/tour-dates").orderByChild("date").on("child_added",function(e){var a=e.val(),t=$("<tr/>");t.append($("<td>").addClass("m-ellipsis date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),t.append($("<td>").addClass("m-ellipsis tour").text(a.tour)),t.append($("<td>").addClass("m-ellipsis venue").text(a.venue)),t.append($("<td>").addClass("m-ellipsis location").text(a.location)),t.append($("<td>").addClass("m-ellipsis time").text(a.time)),t.append($("<td>").addClass("m-ellipsis link").text(a.link)),t.append($("<td>").html($("<i/>").addClass("fa fa-pencil").data("oid",e.key))),t.children(":last-child").append($("<i/>").addClass("fa fa-times").data("oid",e.key)),$("#admin-tour tbody").prepend(t)}),$("#admin .add-button.add-tour").click(function(){$(".modal-add-tour").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin-tour").on("click",".fa.fa-times",function(){firebase.database().ref("/tour-dates/"+$(this).data("oid")).set(null),$(this).parents("tr").remove()}),$("#admin-tour").on("click",".fa.fa-pencil",function(){var e=$(this).parents("tr").children(),a=$(".modal-edit-tour");a.find(".date").val(e.eq(0).text()),a.find(".tour").val(e.eq(1).text()),a.find(".venue").val(e.eq(2).text()),a.find(".location").val(e.eq(3).text()),a.find(".time").val(e.eq(4).text()),a.find(".link").val(e.eq(5).text()),$(".modal-edit-tour").data("tr",$(this).parents("tr")),$(".modal-edit-tour").data("oid",$(this).data("oid")),$(".modal-edit-tour").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin .modal-add-tour").submit(function(){var a={};return $(this).find(":input").each(function(){var e=$(this).val();"date"==$(this).attr("name")&&(e=[(e=e.split("/"))[2],e[0],e[1]].join("-"),e=parseInt(moment.utc(e).format("x"))),a[$(this).attr("name")]=e}),firebase.database().ref("/tour-dates").push(a),$(".modal-add-tour").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-add-tour input").val(""),!1}),$("#admin .modal-edit-tour").submit(function(){$(".modal-edit-tour");var e=$(this).data("tr"),a=$(".modal-edit-tour .date").val(),t={};return a=[(a=a.split("/"))[2],a[0],a[1]].join("-"),a=parseInt(moment.utc(a).format("x")),t.date=a,t.tour=$(".modal-edit-tour .tour").val(),t.venue=$(".modal-edit-tour .venue").val(),t.location=$(".modal-edit-tour .location").val(),t.time=$(".modal-edit-tour .time").val(),t.link=$(".modal-edit-tour .link").val(),firebase.database().ref("/tour-dates/"+$(this).data("oid")).set(t),e.children().eq(0).text($(".modal-edit-tour .date").val()),e.children().eq(1).text(t.tour),e.children().eq(2).text(t.venue),e.children().eq(3).text(t.location),e.children().eq(4).text(t.time),e.children().eq(5).text(t.link),$(".modal-edit-tour").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-edit-tour input").val(""),!1})});
$(document).ready(function(){var e=null,a=parseInt(moment.utc().startOf("day").format("x"));e="roastmastergeneral.com"==location.hostname||"jeffreyross.com"==location.hostname||"jeffreyrosshomemovie.com"==location.hostname?new Firebase("https://jeff-ross-prd.firebaseio.com/"):new Firebase("https://jeff-ross-dev.firebaseio.com/"),$(".bg-carousel").length>1&&setInterval(function(){var e=$(".bg-carousel.m-visible"),a=e.is(".bg-carousel:last")?$(".bg-carousel").eq(0):e.next();e.removeClass("m-visible"),a.addClass("m-visible")},6500),$(".header .fa-bars").click(function(){$("#overlay").addClass("m-active"),$(".header nav ul").addClass("active")}),$("#overlay").click(function(){$(this).removeClass("m-active"),$(".header nav ul").removeClass("active")}),$(".b-upcoming-show").length&&e.child("tour-dates").orderByChild("date").startAt(a).limitToFirst(1).once("value",function(e){e.forEach(function(e){var a=e.val(),t="",d=$(".b-upcoming-show a");a.link&&(a.link.indexOf("//")>-1?d.attr("href",a.link):d.attr("href","//"+a.link)),t+="next show: ",t+=moment.utc(parseInt(a.date)).format("MMM Do")+" ",t+=a.time+" | ",t+=a.venue+" - ",t+=a.location,d.html(t)})}),$(".press").length&&e.child("press").orderByChild("date").limitToLast(50).once("value",function(e){e.forEach(function(e){var a=e.val(),t=$("<li/>").addClass("press-item"),d=$("<div/>").addClass("press-media m-text"),i=$("<div/>").addClass("press-content"),s=$("<div/>").addClass("press-meta"),l=$("<a/>").attr("target","_blank");a.link&&(a.link.indexOf("//")>-1?l.attr("href",a.link):l.attr("href","//"+a.link)),s.append($("<span/>").addClass("press-publisher").text(a.publisher)),s.append($("<span/>").addClass("press-date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),i.append($("<div>").addClass("press-title").text(a.title)),i.append(s),"article"==a.type?d.append($("<i/>").addClass("fa fa-file-text-o")):"video"==a.type?d.append($("<i/>").addClass("fa fa-video-camera")):"audio"==a.type&&d.append($("<i/>").addClass("fa fa-volume-up")),$(".press").prepend(t.append(l.append(d).append(i)))})}),$(".tour-dates").length&&e.child("tour-dates").orderByChild("date").startAt(a).limitToFirst(50).once("value",function(e){e.forEach(function(e){var a=e.val(),t=$("<tr/>"),d=$("<a/>").attr("target","_blank");a.link&&(a.link.indexOf("//")>-1?d.attr("href",a.link):d.attr("href","//"+a.link)),d.append("BUY"),t.append($("<td/>").addClass("date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),t.append($("<td/>").addClass("time").text(a.time)),t.append($("<td/>").addClass("tour").text(a.tour)),t.append($("<td/>").addClass("venue").text(a.venue)),t.append($("<td/>").addClass("location").text(a.location)),t.append($("<td/>").addClass("link").append(d)),$(".tour-dates tbody").append(t)})}),$(".videos").length&&$.get("https://www.googleapis.com/youtube/v3/playlistItems",{key:"AIzaSyBnpHRDUZhCruzPnmNrN6U_KikY_28-61Q",part:"snippet",playlistId:"UUvCmIDV0kb0CXez4xjNdE_w"},function(e){$.each(e.items,function(e,a){var t='<li class="b-video-wrapper"><iframe src="//www.youtube.com/embed/';t+=a.snippet.resourceId.videoId,t+='"></iframe></li>',$(".videos").append(t)})}),$("#admin").length&&(e.getAuth()&&($("#admin .b-login").addClass("m-display-none"),$("#admin .b-main").removeClass("m-display-none"),$("#admin .b-header").removeClass("m-display-none")),$(".datepicker").each(function(){new Pikaday({field:this,format:"MM/DD/YYYY"})}),$("#admin .b-login").submit(function(){var a=$(".b-login .email").val(),t=$(".b-login .password").val();return e.authWithPassword({email:a,password:t},function(e,a){e?($(".b-login .email").css("border-color","red"),$(".b-login .password").css("border-color","red")):($("#admin .b-login").addClass("m-display-none"),$("#admin .b-main").removeClass("m-display-none"),$("#admin .b-header").removeClass("m-display-none"))}),!1})),$("#admin .e-tab:not(.e-logout)").click(function(){var e=$($(this).attr("href"));return $(this).siblings().removeClass("m-selected"),$(this).addClass("m-selected"),e.siblings().addClass("m-display-none"),e.removeClass("m-display-none"),!1}),$("#admin .e-tab.e-logout").click(function(){e.unauth(),window.location.reload()}),$("#admin .modal .close, #admin .e-overlay").click(function(){$(".modal").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none")}),$("#admin-press").length&&e.child("press").orderByChild("date").on("child_added",function(e){var a=e.val(),t=$("<tr/>");t.append($("<td>").addClass("m-ellipsis date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),t.append($("<td>").addClass("m-ellipsis type m-capitalize").text(a.type)),t.append($("<td>").addClass("m-ellipsis title").text(a.title)),t.append($("<td>").addClass("m-ellipsis publisher").text(a.publisher)),t.append($("<td>").addClass("m-ellipsis link").text(a.link)),t.append($("<td>").html($("<i/>").addClass("fa fa-pencil").data("oid",e.key()))),t.children(":last-child").append($("<i/>").addClass("fa fa-times").data("oid",e.key())),$("#admin-press tbody").prepend(t)}),$("#admin .add-button.add-press").click(function(){$(".modal-add-press").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin-press").on("click",".fa.fa-times",function(){e.child("press").child($(this).data("oid")).set(null),$(this).parents("tr").remove()}),$("#admin-press").on("click",".fa.fa-pencil",function(){var e=$(this).parents("tr").children(),a=$(".modal-edit-press");a.find(".date").val(e.eq(0).text()),a.find(".type").val(e.eq(1).text()),a.find(".title").val(e.eq(2).text()),a.find(".publisher").val(e.eq(3).text()),a.find(".link").val(e.eq(4).text()),$(".modal-edit-press").data("tr",$(this).parents("tr")),$(".modal-edit-press").data("oid",$(this).data("oid")),$(".modal-edit-press").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin .modal-add-press").submit(function(){var a={};return $(this).find(":input").each(function(){var e=$(this).val();"date"==$(this).attr("name")&&(e=e.split("/"),e=[e[2],e[0],e[1]].join("-"),e=parseInt(moment.utc(e).format("x"))),a[$(this).attr("name")]=e}),e.child("press").push(a),$(".modal-add-press").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-add-press input").val(""),!1}),$("#admin .modal-edit-press").submit(function(){var a=($(".modal-edit-press"),$(this).data("tr")),t=$(".modal-edit-press .date").val(),d={};return t=t.split("/"),t=[t[2],t[0],t[1]].join("-"),t=parseInt(moment.utc(t).format("x")),d.date=t,d.type=$(".modal-edit-press .type").val(),d.title=$(".modal-edit-press .title").val(),d.publisher=$(".modal-edit-press .publisher").val(),d.link=$(".modal-edit-press .link").val(),e.child("press").child($(this).data("oid")).set(d),a.children().eq(0).text($(".modal-edit-press .date").val()),a.children().eq(1).text(d.type),a.children().eq(2).text(d.title),a.children().eq(3).text(d.publisher),a.children().eq(4).text(d.link),$(".modal-edit-press").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-edit-press input").val(""),!1}),$("#admin-tour").length&&e.child("tour-dates").orderByChild("date").on("child_added",function(e){var a=e.val(),t=$("<tr/>");t.append($("<td>").addClass("m-ellipsis date").text(moment.utc(parseInt(a.date)).format("MM/DD/YYYY"))),t.append($("<td>").addClass("m-ellipsis tour").text(a.tour)),t.append($("<td>").addClass("m-ellipsis venue").text(a.venue)),t.append($("<td>").addClass("m-ellipsis location").text(a.location)),t.append($("<td>").addClass("m-ellipsis time").text(a.time)),t.append($("<td>").addClass("m-ellipsis link").text(a.link)),t.append($("<td>").html($("<i/>").addClass("fa fa-pencil").data("oid",e.key()))),t.children(":last-child").append($("<i/>").addClass("fa fa-times").data("oid",e.key())),$("#admin-tour tbody").prepend(t)}),$("#admin .add-button.add-tour").click(function(){$(".modal-add-tour").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin-tour").on("click",".fa.fa-times",function(){e.child("tour-dates").child($(this).data("oid")).set(null),$(this).parents("tr").remove()}),$("#admin-tour").on("click",".fa.fa-pencil",function(){var e=$(this).parents("tr").children(),a=$(".modal-edit-tour");a.find(".date").val(e.eq(0).text()),a.find(".tour").val(e.eq(1).text()),a.find(".venue").val(e.eq(2).text()),a.find(".location").val(e.eq(3).text()),a.find(".time").val(e.eq(4).text()),a.find(".link").val(e.eq(5).text()),$(".modal-edit-tour").data("tr",$(this).parents("tr")),$(".modal-edit-tour").data("oid",$(this).data("oid")),$(".modal-edit-tour").removeClass("m-display-none"),$(".e-overlay").removeClass("m-display-none")}),$("#admin .modal-add-tour").submit(function(){var a={};return $(this).find(":input").each(function(){var e=$(this).val();"date"==$(this).attr("name")&&(e=e.split("/"),e=[e[2],e[0],e[1]].join("-"),e=parseInt(moment.utc(e).format("x"))),a[$(this).attr("name")]=e}),e.child("tour-dates").push(a),$(".modal-add-tour").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-add-tour input").val(""),!1}),$("#admin .modal-edit-tour").submit(function(){var a=($(".modal-edit-tour"),$(this).data("tr")),t=$(".modal-edit-tour .date").val(),d={};return t=t.split("/"),t=[t[2],t[0],t[1]].join("-"),t=parseInt(moment.utc(t).format("x")),d.date=t,d.tour=$(".modal-edit-tour .tour").val(),d.venue=$(".modal-edit-tour .venue").val(),d.location=$(".modal-edit-tour .location").val(),d.time=$(".modal-edit-tour .time").val(),d.link=$(".modal-edit-tour .link").val(),e.child("tour-dates").child($(this).data("oid")).set(d),a.children().eq(0).text($(".modal-edit-tour .date").val()),a.children().eq(1).text(d.tour),a.children().eq(2).text(d.venue),a.children().eq(3).text(d.location),a.children().eq(4).text(d.time),a.children().eq(5).text(d.link),$(".modal-edit-tour").addClass("m-display-none"),$(".e-overlay").addClass("m-display-none"),$(".modal-edit-tour input").val(""),!1})});